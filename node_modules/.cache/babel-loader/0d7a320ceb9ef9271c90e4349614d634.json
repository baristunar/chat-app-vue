{"remainingRequest":"/home/btunar/Desktop/vue-chat-app/node_modules/babel-loader/lib/index.js!/home/btunar/Desktop/vue-chat-app/node_modules/cache-loader/dist/cjs.js??ref--0-0!/home/btunar/Desktop/vue-chat-app/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/home/btunar/Desktop/vue-chat-app/src/components/chatSection.vue?vue&type=script&lang=js","dependencies":[{"path":"/home/btunar/Desktop/vue-chat-app/src/components/chatSection.vue","mtime":1610107628930},{"path":"/home/btunar/Desktop/vue-chat-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/btunar/Desktop/vue-chat-app/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/btunar/Desktop/vue-chat-app/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/btunar/Desktop/vue-chat-app/node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICIvaG9tZS9idHVuYXIvRGVza3RvcC92dWUtY2hhdC1hcHAvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiBbInVzZXJJbmZvIiwgImNoYW5nZVRvVXNlciJdLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjaGF0TG9nOiBbXSwKICAgICAgbWVzc2FnZTogIiIKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRaZXJvOiBmdW5jdGlvbiBhZGRaZXJvKGkpIHsKICAgICAgaWYgKGkgPCAxMCkgewogICAgICAgIGkgPSAiMCIgKyBpOwogICAgICB9CgogICAgICByZXR1cm4gaTsKICAgIH0sCiAgICBzY3JvbGxUb0VuZDogZnVuY3Rpb24gc2Nyb2xsVG9FbmQoKSB7CiAgICAgIHZhciBjb250ZW50ID0gdGhpcy4kcmVmcy5jb250YWluZXI7CiAgICAgIGNvbnRlbnQuc2Nyb2xsVG9wID0gY29udGVudC5zY3JvbGxIZWlnaHQ7CiAgICB9LAogICAgc2VuZE1lc3NhZ2U6IGZ1bmN0aW9uIHNlbmRNZXNzYWdlKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdmFyIGN1cnJlbnRUaW1lID0gbmV3IERhdGUoKTsKICAgICAgdmFyIGN1cnJlbnRIb3VyID0gdGhpcy5hZGRaZXJvKGN1cnJlbnRUaW1lLmdldEhvdXJzKCkpOwogICAgICB2YXIgY3VycmVudE1pbnV0ZSA9IHRoaXMuYWRkWmVybyhjdXJyZW50VGltZS5nZXRNaW51dGVzKCkpOwoKICAgICAgd2hpbGUgKHRoaXMubWVzc2FnZSAhPT0gIiIpIHsKICAgICAgICB2YXIgY2hhdCA9IHsKICAgICAgICAgIHVzZXJJRDogdGhpcy51c2VySW5mb1swXS51c2VySUQsCiAgICAgICAgICBtZXNhajogdGhpcy5tZXNzYWdlLAogICAgICAgICAgdG86IHRoaXMuY2hhbmdlVG9Vc2VyLnVzZXJJRCwKICAgICAgICAgIHRpbWU6IGN1cnJlbnRIb3VyICsgIjoiICsgY3VycmVudE1pbnV0ZQogICAgICAgIH07CiAgICAgICAgdGhpcy5tZXNzYWdlID0gIiI7CiAgICAgICAgYXhpb3MucG9zdCgiaHR0cDovL2xvY2FsaG9zdDozMDAwL2NoYXQiLCBjaGF0KS50aGVuKGZ1bmN0aW9uIChzYXZlX21lc3NhZ2UpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJzYXZlX21lc3NhZ2UiLCBzYXZlX21lc3NhZ2UpOwoKICAgICAgICAgIF90aGlzLmNoYXRMb2cucHVzaChzYXZlX21lc3NhZ2UuZGF0YSk7CiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgIGNvbnNvbGUubG9nKCJlICIsIGUpOwogICAgICAgIH0pOwogICAgICAgIGNvbnNvbGUubG9nKGNoYXQpOwogICAgICB9CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgaXNEaXNhYmxlOiBmdW5jdGlvbiBpc0Rpc2FibGUoKSB7CiAgICAgIHJldHVybiB0aGlzLm1lc3NhZ2UgPT0gIiIgPyB0cnVlIDogZmFsc2U7CiAgICB9CiAgfSwKICB1cGRhdGVkOiBmdW5jdGlvbiB1cGRhdGVkKCkgewogICAgdGhpcy5zY3JvbGxUb0VuZCgpOwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuc2Nyb2xsVG9FbmQoKTsKICB9LAogIHdhdGNoOiB7CiAgICBjaGFuZ2VUb1VzZXI6IGZ1bmN0aW9uIGNoYW5nZVRvVXNlcigpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICBheGlvcy5nZXQoImh0dHA6Ly9sb2NhbGhvc3Q6MzAwMC9jaGF0P3VzZXJJRD0iICsgdGhpcy51c2VySW5mb1swXS51c2VySUQgKyAiJnRvPSIgKyB0aGlzLmNoYW5nZVRvVXNlci51c2VySUQgKyAiJnRvPSIgKyB0aGlzLnVzZXJJbmZvWzBdLnVzZXJJRCArICImdXNlcklEPSIgKyB0aGlzLmNoYW5nZVRvVXNlci51c2VySUQpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgdmFyIF90aGlzMiRjaGF0TG9nOwoKICAgICAgICBjb25zb2xlLmxvZygicmVzcG9uc2UgY2hhdCIsIHJlc3BvbnNlKTsKICAgICAgICBfdGhpczIuY2hhdExvZyA9IFtdOwoKICAgICAgICAoX3RoaXMyJGNoYXRMb2cgPSBfdGhpczIuY2hhdExvZykucHVzaC5hcHBseShfdGhpczIkY2hhdExvZywgX3RvQ29uc3VtYWJsZUFycmF5KHJlc3BvbnNlLmRhdGEpKTsKICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICBjb25zb2xlLmxvZygiZSIsIGUpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/home/btunar/Desktop/vue-chat-app/src/components/chatSection.vue"],"names":[],"mappings":";AAuBA,OAAO,KAAP,MAAkB,OAAlB;AACA,eAAe;AACb,EAAA,KAAK,EAAE,CAAC,UAAD,EAAa,cAAb,CADM;AAEb,EAAA,IAFa,kBAEN;AACL,WAAO;AACL,MAAA,OAAO,EAAE,EADJ;AAEL,MAAA,OAAO,EAAE;AAFJ,KAAP;AAID,GAPY;AASb,EAAA,OAAO,EAAE;AACP,IAAA,OADO,mBACC,CADD,EACI;AACT,UAAI,CAAA,GAAI,EAAR,EAAY;AACV,QAAA,CAAA,GAAI,MAAM,CAAV;AACF;;AACA,aAAO,CAAP;AACD,KANM;AAOP,IAAA,WAPO,yBAOO;AACZ,UAAI,OAAM,GAAI,KAAK,KAAL,CAAW,SAAzB;AACA,MAAA,OAAO,CAAC,SAAR,GAAoB,OAAO,CAAC,YAA5B;AACD,KAVM;AAWP,IAAA,WAXO,yBAWO;AAAA;;AACZ,UAAM,WAAU,GAAI,IAAI,IAAJ,EAApB;AACA,UAAM,WAAU,GAAI,KAAK,OAAL,CAAa,WAAW,CAAC,QAAZ,EAAb,CAApB;AACA,UAAM,aAAY,GAAI,KAAK,OAAL,CAAa,WAAW,CAAC,UAAZ,EAAb,CAAtB;;AAEA,aAAO,KAAK,OAAL,KAAiB,EAAxB,EAA4B;AAC1B,YAAI,IAAG,GAAI;AACT,UAAA,MAAM,EAAE,KAAK,QAAL,CAAc,CAAd,EAAiB,MADhB;AAET,UAAA,KAAK,EAAE,KAAK,OAFH;AAGT,UAAA,EAAE,EAAE,KAAK,YAAL,CAAkB,MAHb;AAIT,UAAA,IAAI,EAAE,WAAU,GAAG,GAAb,GAAiB;AAJd,SAAX;AAMA,aAAK,OAAL,GAAe,EAAf;AAEA,QAAA,KAAI,CACD,IADH,CACQ,4BADR,EACsC,IADtC,EAEG,IAFH,CAEQ,UAAC,YAAD,EAAkB;AACtB,UAAA,OAAO,CAAC,GAAR,CAAY,cAAZ,EAA4B,YAA5B;;AACA,UAAA,KAAI,CAAC,OAAL,CAAa,IAAb,CAAkB,YAAY,CAAC,IAA/B;AACD,SALH,EAMG,KANH,CAMS,UAAC,CAAD,EAAO;AACZ,UAAA,OAAO,CAAC,GAAR,CAAY,IAAZ,EAAkB,CAAlB;AACD,SARH;AASA,QAAA,OAAO,CAAC,GAAR,CAAY,IAAZ;AACF;AACD;AApCM,GATI;AA+Cb,EAAA,QAAQ,EAAE;AACR,IAAA,SADQ,uBACI;AACV,aAAO,KAAK,OAAL,IAAgB,EAAhB,GAAqB,IAArB,GAA4B,KAAnC;AACD;AAHO,GA/CG;AAqDb,EAAA,OArDa,qBAqDH;AACR,SAAK,WAAL;AACD,GAvDY;AAwDb,EAAA,OAxDa,qBAwDH;AACR,SAAK,WAAL;AACD,GA1DY;AA2Db,EAAA,KAAK,EAAE;AACL,IAAA,YADK,0BACU;AAAA;;AACb,MAAA,KAAI,CACD,GADH,CAEI,uCACE,KAAK,QAAL,CAAc,CAAd,EAAiB,MADnB,GAEE,MAFF,GAGE,KAAK,YAAL,CAAkB,MAHpB,GAIE,MAJF,GAKE,KAAK,QAAL,CAAc,CAAd,EAAiB,MALnB,GAME,UANF,GAOE,KAAK,YAAL,CAAkB,MATxB,EAWG,IAXH,CAWQ,UAAC,QAAD,EAAc;AAAA;;AAClB,QAAA,OAAO,CAAC,GAAR,CAAY,eAAZ,EAA6B,QAA7B;AACA,QAAA,MAAI,CAAC,OAAL,GAAe,EAAf;;AACA,0BAAA,MAAI,CAAC,OAAL,EAAa,IAAb,0CAAqB,QAAQ,CAAC,IAA9B;AACD,OAfH,EAgBG,KAhBH,CAgBS,UAAC,CAAD,EAAO;AACZ,QAAA,OAAO,CAAC,GAAR,CAAY,GAAZ,EAAiB,CAAjB;AACD,OAlBH;AAmBD;AArBI;AA3DM,CAAf","sourcesContent":["<template>\n  <div class=\"card mr-10\">\n    <ul class=\"messages\" ref=\"container\">\n      <li\n        :class=\"{ 'current-user': userInfo[0].userID == i.userID }\"\n        v-for=\"i in chatLog\"\n        :key=\"i\"\n        class=\"text-color-black\"\n      >\n        {{ i.mesaj }}\n        <small>{{ i.time }}</small>\n      </li>\n    </ul>\n    <div class=\"text-container d-flex justify-content-start align-items-start\">\n      <input @keypress.enter=\"sendMessage\" v-model=\"message\" type=\"text\" />\n      <button :disabled=\"isDisable\" class=\"btn-primary\" @click=\"sendMessage\">\n        Send\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\nexport default {\n  props: [\"userInfo\", \"changeToUser\"],\n  data() {\n    return {\n      chatLog: [],\n      message: \"\",\n    };\n  },\n\n  methods: {\n    addZero(i) {\n      if (i < 10) {\n        i = \"0\" + i;\n      }\n      return i;\n    },\n    scrollToEnd() {\n      let content = this.$refs.container;\n      content.scrollTop = content.scrollHeight;\n    },\n    sendMessage() {\n      const currentTime = new Date();\n      const currentHour = this.addZero(currentTime.getHours());\n      const currentMinute = this.addZero(currentTime.getMinutes());\n\n      while (this.message !== \"\") {\n        let chat = {\n          userID: this.userInfo[0].userID,\n          mesaj: this.message,\n          to: this.changeToUser.userID,\n          time: currentHour +\":\"+currentMinute\n        };\n        this.message = \"\";\n\n        axios\n          .post(\"http://localhost:3000/chat\", chat)\n          .then((save_message) => {\n            console.log(\"save_message\", save_message);\n            this.chatLog.push(save_message.data);\n          })\n          .catch((e) => {\n            console.log(\"e \", e);\n          });\n        console.log(chat);\n      }\n    },\n  },\n  computed: {\n    isDisable() {\n      return this.message == \"\" ? true : false;\n    },\n  },\n\n  updated() {\n    this.scrollToEnd();\n  },\n  mounted() {\n    this.scrollToEnd();\n  },\n  watch: {\n    changeToUser() {\n      axios\n        .get(\n          \"http://localhost:3000/chat?userID=\" +\n            this.userInfo[0].userID +\n            \"&to=\" +\n            this.changeToUser.userID +\n            \"&to=\" +\n            this.userInfo[0].userID +\n            \"&userID=\" +\n            this.changeToUser.userID\n        )\n        .then((response) => {\n          console.log(\"response chat\", response);\n          this.chatLog = [];\n          this.chatLog.push(...response.data);\n        })\n        .catch((e) => {\n          console.log(\"e\", e);\n        });\n    },\n  },\n};\n</script>\n<style scoped>\n.text-color-black {\n  color: black;\n}\n</style>\n"],"sourceRoot":""}]}